<html>

<head>

    <script src="https://mixedreality.mozilla.org/ammo.js/builds/ammo.wasm.js"></script>
    <script src="https://cdn.skypack.dev/pin/three@v0.134.0-mlfrkS6HEbKKwwCDDo6H/mode=imports/optimized/three.js"></script>

    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/aframevr/aframe@02f028bf319915bd5de1ef8b033495fe80b6729b/dist/aframe-master.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.0/dist/aframe-extras.min.js"></script>
    <script src="aframe-physics-system.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/galadirith/aframe-teleport-controls@ec9d19c/dist/aframe-teleport-controls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-blink-controls/dist/aframe-blink-controls.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.2.0/dist/aframe-environment-component.min.js"></script>

    <!--<script src="https://unpkg.com/super-hands@^3.0.1/dist/super-hands.min.js"></script>-->
    <script src="super-hands.js"></script>

    <script src="pendulumAngle.js"></script>
    <script src="dragAngle.js"></script>
    <script src="phaseShift.js"></script>
    <script src="laser.js"></script>
</head>

<body>
    <a-scene physics=" driver: ammo; debug:true; debugDrawMode: 0; friction: 1;">
        <a-entity id="player" position="9 0 0">
            <a-entity id="camera" camera="active: true" look-controls wasd-controls></a-entity>
            <a-entity id="teleControl" oculus-touch-controls="hand: left" blink-controls="button: trigger; collisionEntities: #ground;"></a-entity>
            <a-entity id="grabControl" ammo-body="type: kinematic; emitCollisionEvents: true; disableCollision: true" ammo-shape="fit: manual; type:sphere; sphereRadius: 0.04" phase-shift physics-collider super-hands="colliderEvent: collidestart;
            colliderEventProperty: targetEl;
            colliderEndEvent: collideend;
            colliderEndEventProperty: targetEl;" hand-controls="hand: right; handModelStyle: lowPoly; color: #ffcccc"></a-entity>
        </a-entity>

        <a-box position="8 0.5 -2.1" class="block" ammo-body="type: dynamic; mass: 0.05;  angularFactor: 0 0 0; friction: 5;" width="0.5" height="0.5" depth="0.5" ammo-shape rotation="0 0 0" material="color:#6e6e6e; metalness: 0.5;"></a-box>

        <a-box id="arm1" position="8.5 1 -3" ammo-body="type: static" width="0.2" height="4.5" depth="0.2" ammo-shape color="#2e1d1d"></a-box>
        <a-box id="arm2" ammo-constraint="target: #arm1;type:fixed;" position="8.5 3.3 -2.1" ammo-body="type: static" height="0.2" width="2" depth="0.2" rotation="0 90 0" ammo-shape color="#2e1d1d">

        </a-box>
        <a-cylinder id="rope" ammo-constraint="target: #arm2; type: hinge;  pivot: 0 1.2 0; targetPivot: 0 -0.2 0; axis: 1 0 0; targetAxis: 1 0 0;" position="8.5 1.5 -3" material="color:#736767; metalness: 0.2;" ammo-body="type: dynamic;  angularFactor: 0 1 1; angularSleepingThreshold: 0; linearSleepingThreshold: 0;"
            ammo-shape="type: cylinder" height="2.4" radius="0.04">

        </a-cylinder>
        <a-entity id="angle-text" text="color: white; width: 10" position="14 1 -5"></a-entity>
        <a-sphere pendulum-angle drag-angle id="pend" ammo-constraint="target: #rope; type: hinge; pivot: 0 0.2 0; targetPivot: 0 -1.2 0;" ammo-body="type: dynamic; angularDamping: 1; angularSleepingThreshold: 0; linearSleepingThreshold: 0; angularFactor: 0 1 1; mass:30"
            ammo-shape="type: sphere" hoverable draggable event-set__hoveron="_event: hover-start; material.opacity: 0.7; transparent: true" event-set__hoveroff="_event: hover-end; material.opacity: 1; transparent: false" position="8.5 0.6 1" radius="0.2"
            material="color:#736767; metalness: 0.2" class="throwable"></a-sphere>
        <a-plane id="ground" ammo-body="type: static; friction: 5" ammo-shape="type: box" position="0 0 0" rotation="-90 0 0" width="30" height="10" material="color:#1c1c1c; metalness: 0; roughness: 1;"></a-plane>
        <a-box class="wall" raycaster-listen="angle:-5" ammo-body="type: static" ammo-shape="type: box" position="0 2 -5.05" rotation="0 0 0" width="30" height="4" depth="0.1" material="color:#1c1c1c; metalness: 0; roughness: 1;"></a-box>
        <a-box class="wall" raycaster-listen ammo-body="type: static" ammo-shape="type: box" position="0 2 +5.05" rotation="0 0 0" width="30" height="4" depth="0.1" material="color:#1c1c1c; metalness: 0; roughness: 1;"></a-box>
        <a-box class="wall" raycaster-listen ammo-body="type: static" ammo-shape="type: box" position="-15 2 0" rotation="0 90 0" width="10" height="4" depth="0.1" material="color:#1c1c1c; metalness: 0; roughness: 1;"></a-box>
        <a-box class="wall" raycaster-listen ammo-body="type: static" ammo-shape="type: box" position="+15 2 0" rotation="0 90 0" width="10" height="4" depth="0.1" material="color:#1c1c1c; metalness: 0; roughness: 1;"></a-box>
        <a-box raycaster="showLine: true; far: 100; lineColor: red; lineOpacity: 1; objects:.wall,.block;" id="laser-output" ammo-body="type: static" ammo-shape="type: box" position="5 0.05 -5.05" rotation="175 0 0" width="0.1" height="0.1" depth="0.1" material="color:#000000; metalness: 0; roughness: 1;"></a-box>
        <a-sky color="#0a0e3b"></a-sky>
    </a-scene>
</body>

</html>